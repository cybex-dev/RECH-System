@import helpers.CookieTags
@()

@getName = @{
    val v = session().get(CookieTags.fullname)
    if (v == null || v.isEmpty) {
        Nil
    } else {
        v
    }
}

<div class="row tbsRow">
    <div class="col-sm-12 tbsHnopad">
        <div class="col-sm-12 BoxMediumBlue TextWhite tbsVpad">
            <div class="portal-icon portal-icon-extend-margin">
                <a href="@controllers.UserSystem.routes.ProfileHandler.overview()" id="IconMenuBarOverview"><ic class="fa fa-3x fa-reorder drop-bottom-5"></ic><br>
                    <span>Overview</span></a></div>
            <div class="portal-icon portal-icon-extend-margin">
                <a href="@controllers.ApplicationSystem.routes.ApplicationHandler.allApplications()" id="IconMenuBarApplications" onmouseenter="openPopup('application_dropdown-menu')"><ic class="fa fa-3x fa-book drop-bottom-5" ></ic><br>
                    <span>Applications</span></a>
            </div>
            <div class="portal-icon portal-icon-extend-margin">
                <a href="@controllers.MessageSystem.routes.MessageController.allMessages()" id="IconMenuBarMessage" target="_blank"><ic class="fa fa-3x fa-envelope-o drop-bottom-5"></ic><br>
                    <span>Message</span></a></div>
            <div class="portal-icon portal-icon-extend-margin">
                <a href="@routes.HomeController.about()" id="IconMenuBarAbout"><ic class="fa fa-3x fa-users drop-bottom-5"></ic><br>
                    <span>About the Committee</span></a></div>
            <div class="portal-icon portal-icon-extend-margin">
                <a href="@routes.HomeController.helpSupport()" id="IconMenuBarHelpSupport"><ic class="fa fa-3x fa-question-circle-o drop-bottom-5"></ic><br>
                    <span>Help & Support</span></a></div>

            @*TODO fix the drop down feature*@
            <div class="pull-right portal-icon larger-width">
            @if(getName == Nil) {
                <div class="row">
                    <div class="col-sm-6">
                        <button onclick="window.location.href = '@controllers.UserSystem.routes.LoginController.login()'" id="btnLogin" class="nmu-button">Login</button></a>
                    </div>
                    <div class="col-sm-6l">
                        <button onclick="window.location.href = '@controllers.UserSystem.routes.RegistrationController.register()'" id="btnRegister" class="nmu-button">Register</button></a>
                    </div>
                </div>
            } else {
                <ic class="fa fa-3x fa-user-circle-o drop-bottom-5"></ic>
                    <br/>
                <ul id="profile-menu" class="sm sm-clean-vertical">
                    <li><a href="#" id="IconMenuBarProfile">@getName<span class="caret"></span> </a>
                        <ul class="dropdown-menu">
                            <li><a style="background-color: red;" href="@controllers.UserSystem.routes.ProfileHandler.settings()">Settings</a></li>
                            <li><a style="background-color: red;" href="@controllers.UserSystem.routes.LoginController.logout()">Logout</a></li>
                        </ul>
                    </li>
                </ul>
            }
            </div>
        </div>
    </div>
    <ul id="application_dropdown-menu" class="sm darkbackground" style="display: none" onmouseleave="hidePopup('application_dropdown-menu')">
        <li><a href="#" onclick="openPopup('select_application_type_popup', true);">Create New Application</a></li>
        <li><a href="@controllers.ApplicationSystem.routes.ApplicationHandler.allApplications()">View Applications</a></li>
    </ul>
</div>

    <div id="select_application_type_popup" class="modal">
        <div class="modal-content animate nmu-theme-darkbackground">
            <div class="popup-header">
                <span onclick="hidePopup('select_application_type_popup')" class="close" title="Close PopUp">&times;</span>
                <h2>Choose application type</h2>
            </div>

            <div class="lessen-top-margin">
                <form class="lessen-top-margin-child" action="@controllers.ApplicationSystem.routes.ApplicationHandler.newApplication("human")" method="get">
                    <button class="nmu-button" type="submit">Human Research</button>
                </form>
                <form class="lessen-top-margin-child" action="@controllers.ApplicationSystem.routes.ApplicationHandler.newApplication("animal")" method="get">
                    <button class="nmu-button" type="submit">Animal Research</button>
                </form>
            </div>
        </div>
    </div>